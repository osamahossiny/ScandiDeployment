# Enable URL rewriting
RewriteEngine On

# Serve existing files directly
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Handle GraphQL API requests (e.g., requests to /graphql)
RewriteCond %{REQUEST_URI} ^/graphql$
RewriteRule ^(.*)$ index.php [QSA,L]

# Route API calls (you can modify the path if necessary)
RewriteCond %{REQUEST_URI} ^/api/(.*)$
RewriteRule ^api/(.*)$ index.php [QSA,L]

# Handle React frontend (for any non-file requests)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ ../frontend/build/index.html [L]

# Handle 404 errors by routing back to React app
ErrorDocument 404 ../frontend/build/index.html
